# Современный процесс автоматизированной разработки

Краткое описание: Изучение современных этапов процесса разработки в рамках CI\CD и CI\CD\CD.

Ознакомившись с основными терминами и понятиями, мы можем перейти к более детальному изучению самого процесса CI\CD.

## DevOps или простой CI\CD

Как правило данный процесс изображают в виде бесконечности или перевернутой восьмерки. Для упрощения изучения мы ее развернем в прямую линию.

### Plan

Первым этапом является планирование нашего будущего продукта или функционала. На данном этапе мы должны ответить на 3 простых вопроса:

- Для кого мы это делаем?
  - Задавая данный вопрос, мы должны определить, кто является нашей конечной целевой аудиторией, которая будет потреблять наш сервис.
- Что мы делаем?
  - Задавая данный вопрос, мы должны точно определить техническое задание для нашего будущего продукта.
- Почему мы это делаем следующим образом?
  - Задавая данный вопрос, мы должны определить, почему нами были приняты те или иные архитектурные или иные решения, осуществлен тот или иной выбор компонентов. Документируется каждое решение и его обоснования.

### Code

На данном этапе разработчики пишут сам код и в дальнейшем хранят его в репозитории исходного кода.

### Build

Шаг, в котором происходит компиляция исходного кода в готовый артефакт и проверяется его возможность собраться без ошибок. Данный шаг может выполняться как в автоматическом режиме по каждому коммиту разработчика, так и в ручном режиме, когда разработчик сам запускает процесс сборки.

### Test

На данном шаге происходит тестирование собранного приложения. Оно заключается в запуске приложения и проверке его работоспособности и работоспособности всей системы в целом, т.е. помимо просто тестирования, на работающий функционал проверяются и интеграции с другими программными компонентами.

### Release

Данный шаг носит информативный характер. В оповещение ответственного администратора входит информация о том, что подготовлен новый релиз, он прошел все необходимые тесты и готов к установке на продуктовую платформу.

### Deploy

Шаг, в котором релиз попадает на продуктовую платформу.
Если у нас простой CI\CD, приложение на продуктовую платформу публикует администратор системы. Если же CI\CD\CD, публикация происходит в автоматическом режиме.

### Operate

Шаг, в котором происходит управление приложением. Его настройка, выдача доступов конечным пользователям, управление инцидентами и проблемами.

### Measure

В данном шаге мы проводим сбор информации касательно работы приложения: его метрики, логи, обратная связь от пользователей.  
После этого переходим на этап “Plan” опять. Наша бесконечность замкнулась.

## DevSecOps или эталонный CI\CD\CD

Мы изучили простой CI\CD, в котором над продуктом работает только разработчик, тестировщик и инженер. Однако, если мы вспомним “Handbook”, то по мнению основателей, над продуктом должны работать не только эти три специалиста, а еще как минимум сотрудники отдела информационной безопасности. Таким образом, наш новый CI\CD будет выглядеть следующим образом.

### Plan

Еще на этапе планирования нашей архитектуры мы должны провести ее проверку на возможные угрозы. Например, если наше приложение доступно по 80 порту, а панель администратора доступна по протоколу TLSv1.1 и ниже.  

### Code

На данном этапе может быть произведена комплексная проверка кода на возможные утечки данных, такие как пароли или ключи аутентификации. Есть несколько вариантов данной проверки для устранения подобного рода утечек: можно мониторить сам репозиторий исходного кода и запрещать любые манипуляции с кодом, который содержит утечки, и можно установить дополнительное программное обеспечение на компьютер разработчика и запретить саму возможность коммита с паролями и токенами аутентификации. Таким образом код, который попадает в наше хранилище, не будет содержать логинов и паролей к рабочим системам или данный код не сможет участвовать в процессе сборки приложения. Также стоит добавить, что все коммиты должны быть подписаны через GPG ключ, а коммиты без данного ключа должны быть отклонены.

### Build

На данном этапе, еще до начала сборки приложения, исходные код должен пройти статистический анализ. Данный анализ производится без запуска компилятора и без необходимости запуска самого приложения. Цель данного анализа - найти незакрытые или неиспользуемые классы, дублирующийся переменные или некорректное повторное использование переменных, дублирующийся код, возможные баги исполняемого кода и еще много вещей. Все зависит от инструмента, а также от настроек.  

Далее происходит проверка используемых зависимостей. В ходе данной проверки происходит сравнивание используемых зависимостей с базами CVE для недопущения использования зависимости с уязвимостью.

После этого происходит сама компиляция приложения и его публикация в репозиторий. Публикация тоже должна быть подписана цифровым ключом, дабы никто не мог опубликовать непроверенную версию.

В случае использования контейнера происходит еще и проверка контейнера и используемых в нем компонентов.

### Test

Дальше начинается этап тестирования (использованы могут быть только подписанные артефакты), во время которого происходит не только базовая проверка функционала, но и возможных ошибок, связанных с безопасностью во время исполнения кода или выполнения заложенного функционала. Данная проверка необходима, т.к. статический анализ кода не может охватить весь спектр возможных уязвимостей.

### Release

Данный этап ничем не отличается от аналогичного этапа в упрощенной модели за исключением того, что в отчет также попадает информация со всех проверок безопасности.

### Deploy
На данном этапе происходит повторная проверка используемого кода на уязвимости зависимостей, т.к. между шагами “Release” и “Deploy” может пройти достаточно много времени и дабы в продуктовую среду не попало приложениям с уязвимыми зависимостями их проверяют еще раз.

### Operate
К управлению приложением добавляется периодическое сканирование на предмет появления новых уязвимостей.

### Measure
Помимо логов самого приложения, мы анализируем логи обращений к API и, в случае появления подозрительной активности, оперативно на нее реагируем.

## Современные проблемы процесса разработки и автоматизации

К современным проблемам процесса разработки можно отнести следующие пункты:

- Низкое качество кода:
  - Выражается в незакрытых классах, открытых переменных, использовании зашитых переменных в противовес динамическим переменным;
- Сохранение паролей и другой чувствительной информации в исходном коде:
  - Выражается в сохранении паролей и логинов и другой чувствительной информации прямо в коде;
- Нежелание изучать новые технологии и подходы, продолжение работы по-старым методологиям без учета новых тенденций:
  - Выражается в непонимании, что использование старых технологий и подходов в рамках новых парадигм разработки больше мешает, чем помогает, и затормаживает развитие программы;
- Отказ от использования новых методик или саботаж налаживания коммуникаций;
- Нежелание находить баланс между скоростью и качеством выполняемых задач;
- Нежелание поиска компромиссов с бизнесом;
- Отсутствие этапа исследования и разработки перед принятием архитектурного решения:
  - Выражается в том, что выбор компонентов архитектуры основывается не на собственных исследованиях или анализе исследований других компаний, а на маркетинговых встречах, по чтениям рекламных статей на полупрофильных ресурсах или чтению статей от авторов с малым количеством подобных исследований, что может говорить о малом опыте в подобном вопросе, или имеющих низкую культуру исследования.

## Список литературы

- [SAST, DAST, IAST, and RASP](https://www.ptsecurity.com/ww-en/analytics/knowledge-base/sast-dast-iast-and-rasp-how-to-choose/)
